{
  "Parameters": {
    "ConfigS3Bucket": {
      "Type": "String",
      "Default": "pbmmaccel-config",
      "Description": "The S3 bucket name that contains the initial Accelerator configuration."
    },
    "ConfigRepositoryName": {
      "Type": "String",
      "Default": "PBMMAccel-Config-Repo",
      "Description": "The Code Commit repository name that contains the Accelerator configuration."
    },
    "ConfigBranchName": {
      "Type": "String",
      "Default": "master",
      "Description": "The Code Commit branch name that contains the Accelerator configuration"
    },
    "GithubSecretId": {
      "Type": "String",
      "Default": "accelerator/github-token",
      "Description": "The token to use to access the Github repository."
    },
    "GithubOwner": {
      "Type": "String",
      "Default": "aws-samples",
      "Description": "The owner of the Github repository containing the Accelerator code."
    },
    "GithubRepository": {
      "Type": "String",
      "Default": "aws-pbmm-accelerator",
      "Description": "The name of the Github repository containing the Accelerator code."
    },
    "GithubBranch": {
      "Type": "String",
      "Default": "release",
      "Description": "The branch of the Github repository containing the Accelerator code."
    },
    "Email": {
      "Type": "String",
      "Description": "The notification email that will get Code Release notifications."
    }
  },
  "Resources": {
    "InstallerRole13277E70": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "codebuild.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "RoleName": "PBMMAccel-L-CPL-Installer",
        "Tags": [
          {
            "Key": "Accelerator",
            "Value": "PBMM"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/InstallerRole/Resource"
      }
    },
    "InstallerRoleDefaultPolicyC01C83A5": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "cloudformation:*",
              "Effect": "Allow",
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    "arn:aws:cloudformation:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":stack/*"
                  ]
                ]
              }
            },
            {
              "Action": "s3:*",
              "Effect": "Allow",
              "Resource": "arn:aws:s3:::cdktoolkit-stagingbucket-*"
            },
            {
              "Action": "*",
              "Condition": {
                "ForAnyValue:StringEquals": {
                  "aws:CalledVia": [
                    "cloudformation.amazonaws.com"
                  ]
                }
              },
              "Effect": "Allow",
              "Resource": "*"
            },
            {
              "Action": [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents"
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":logs:",
                      {
                        "Ref": "AWS::Region"
                      },
                      ":",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":log-group:/aws/codebuild/",
                      {
                        "Ref": "InstallerProject879FF821"
                      }
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":logs:",
                      {
                        "Ref": "AWS::Region"
                      },
                      ":",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":log-group:/aws/codebuild/",
                      {
                        "Ref": "InstallerProject879FF821"
                      },
                      ":*"
                    ]
                  ]
                }
              ]
            },
            {
              "Action": [
                "codebuild:CreateReportGroup",
                "codebuild:CreateReport",
                "codebuild:UpdateReport",
                "codebuild:BatchPutTestCases"
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":codebuild:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":report-group/",
                    {
                      "Ref": "InstallerProject879FF821"
                    },
                    "-*"
                  ]
                ]
              }
            },
            {
              "Action": [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*"
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "ArtifactsBucket2AAC5544",
                    "Arn"
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "ArtifactsBucket2AAC5544",
                          "Arn"
                        ]
                      },
                      "/*"
                    ]
                  ]
                }
              ]
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "InstallerRoleDefaultPolicyC01C83A5",
        "Roles": [
          {
            "Ref": "InstallerRole13277E70"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/InstallerRole/DefaultPolicy/Resource"
      }
    },
    "InstallerProject879FF821": {
      "Type": "AWS::CodeBuild::Project",
      "Properties": {
        "Artifacts": {
          "Type": "CODEPIPELINE"
        },
        "Environment": {
          "ComputeType": "BUILD_GENERAL1_MEDIUM",
          "EnvironmentVariables": [
            {
              "Name": "ACCELERATOR_NAME",
              "Type": "PLAINTEXT",
              "Value": "PBMM"
            },
            {
              "Name": "ACCELERATOR_PREFIX",
              "Type": "PLAINTEXT",
              "Value": "PBMMAccel-"
            },
            {
              "Name": "ACCELERATOR_STATE_MACHINE_NAME",
              "Type": "PLAINTEXT",
              "Value": "PBMMAccel-MainStateMachine_sm"
            },
            {
              "Name": "CONFIG_REPOSITORY_NAME",
              "Type": "PLAINTEXT",
              "Value": {
                "Ref": "ConfigRepositoryName"
              }
            },
            {
              "Name": "CONFIG_BRANCH_NAME",
              "Type": "PLAINTEXT",
              "Value": {
                "Ref": "ConfigBranchName"
              }
            },
            {
              "Name": "CONFIG_S3_BUCKET",
              "Type": "PLAINTEXT",
              "Value": {
                "Ref": "ConfigS3Bucket"
              }
            }
          ],
          "Image": "aws/codebuild/standard:3.0",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER"
        },
        "ServiceRole": {
          "Fn::GetAtt": [
            "InstallerRole13277E70",
            "Arn"
          ]
        },
        "Source": {
          "BuildSpec": "{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"runtime-versions\": {\n        \"nodejs\": 12\n      },\n      \"commands\": [\n        \"npm install --global pnpm\",\n        \"pnpm install --unsafe-perm\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"cd accelerator/cdk\",\n        \"pnpx cdk bootstrap --require-approval never\",\n        \"pnpx cdk deploy --require-approval never\"\n      ]\n    }\n  }\n}",
          "Type": "CODEPIPELINE"
        },
        "Name": "PBMMAccel-InstallerProject_pl",
        "Tags": [
          {
            "Key": "Accelerator",
            "Value": "PBMM"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/InstallerProject/Resource"
      }
    },
    "ExecutionRoleName32216FBD": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "RoleName": "PBMMAccel-L-SFN-Execution",
        "Tags": [
          {
            "Key": "Accelerator",
            "Value": "PBMM"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/ExecutionRoleName/Resource"
      }
    },
    "ExecutionRoleNameDefaultPolicyF1EBADDF": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents"
              ],
              "Effect": "Allow",
              "Resource": "*"
            },
            {
              "Action": "states:StartExecution",
              "Effect": "Allow",
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    "arn:aws:states:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":stateMachine:PBMMAccel-MainStateMachine_sm"
                  ]
                ]
              }
            },
            {
              "Action": [
                "codepipeline:PutJobSuccessResult",
                "codepipeline:PutJobFailureResult"
              ],
              "Effect": "Allow",
              "Resource": "*"
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "ExecutionRoleNameDefaultPolicyF1EBADDF",
        "Roles": [
          {
            "Ref": "ExecutionRoleName32216FBD"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/ExecutionRoleName/DefaultPolicy/Resource"
      }
    },
    "ExecutionLambda949691DD": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "ZipFile": "const aws = require('aws-sdk');\n\nexports.handler = async function(event, context) {\n  const codepipeline = new aws.CodePipeline();\n  const jobId = event['CodePipeline.job'].id;\n  try {\n    const sfn = new aws.StepFunctions();\n    await sfn\n      .startExecution({\n        stateMachineArn: process.env.STATE_MACHINE_ARN,\n      })\n      .promise();\n\n    return codepipeline\n      .putJobSuccessResult({\n        jobId,\n      })\n      .promise();\n  } catch (e) {\n    return codepipeline\n      .putJobFailureResult({\n        jobId,\n        failureDetails: {\n          externalExecutionId: context.awsRequestId,\n          type: 'JobFailed',\n          message: JSON.stringify(e),\n        },\n      })\n      .promise();\n  }\n};\n"
        },
        "Handler": "index.handler",
        "Role": {
          "Fn::GetAtt": [
            "ExecutionRoleName32216FBD",
            "Arn"
          ]
        },
        "Runtime": "nodejs12.x",
        "Environment": {
          "Variables": {
            "STATE_MACHINE_ARN": {
              "Fn::Join": [
                "",
                [
                  "arn:aws:states:",
                  {
                    "Ref": "AWS::Region"
                  },
                  ":",
                  {
                    "Ref": "AWS::AccountId"
                  },
                  ":stateMachine:PBMMAccel-MainStateMachine_sm"
                ]
              ]
            }
          }
        },
        "Tags": [
          {
            "Key": "Accelerator",
            "Value": "PBMM"
          }
        ]
      },
      "DependsOn": [
        "ExecutionRoleNameDefaultPolicyF1EBADDF",
        "ExecutionRoleName32216FBD"
      ],
      "Metadata": {
        "aws:cdk:path": "InstallerStack/ExecutionLambda/Resource"
      }
    },
    "ConfigRepository8FE0F38B": {
      "Type": "AWS::CodeCommit::Repository",
      "Properties": {
        "RepositoryName": {
          "Ref": "ConfigRepositoryName"
        },
        "RepositoryDescription": "Repository containing configuration for PBMM Accelerator.",
        "Tags": [
          {
            "Key": "Accelerator",
            "Value": "PBMM"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/ConfigRepository/Resource"
      }
    },
    "ArtifactsBucket2AAC5544": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "Tags": [
          {
            "Key": "Accelerator",
            "Value": "PBMM"
          }
        ]
      },
      "UpdateReplacePolicy": "Retain",
      "DeletionPolicy": "Retain",
      "Metadata": {
        "aws:cdk:path": "InstallerStack/ArtifactsBucket/Resource"
      }
    },
    "PipelineRoleD68726F7": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "codepipeline.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "Tags": [
          {
            "Key": "Accelerator",
            "Value": "PBMM"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/Pipeline/Role/Resource"
      }
    },
    "PipelineRoleDefaultPolicyC7A05455": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*"
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "ArtifactsBucket2AAC5544",
                    "Arn"
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "ArtifactsBucket2AAC5544",
                          "Arn"
                        ]
                      },
                      "/*"
                    ]
                  ]
                }
              ]
            },
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "PipelineManualApprovalCodePipelineActionRole08E828A0",
                  "Arn"
                ]
              }
            },
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "PipelineDeployDeployAcceleratorCodePipelineActionRole45FB0E12",
                  "Arn"
                ]
              }
            },
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "PipelineExecuteExecuteAcceleratorStateMachineCodePipelineActionRole7336DC59",
                  "Arn"
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PipelineRoleDefaultPolicyC7A05455",
        "Roles": [
          {
            "Ref": "PipelineRoleD68726F7"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/Pipeline/Role/DefaultPolicy/Resource"
      }
    },
    "PipelineC660917D": {
      "Type": "AWS::CodePipeline::Pipeline",
      "Properties": {
        "RoleArn": {
          "Fn::GetAtt": [
            "PipelineRoleD68726F7",
            "Arn"
          ]
        },
        "Stages": [
          {
            "Actions": [
              {
                "ActionTypeId": {
                  "Category": "Source",
                  "Owner": "ThirdParty",
                  "Provider": "GitHub",
                  "Version": "1"
                },
                "Configuration": {
                  "Owner": {
                    "Ref": "GithubOwner"
                  },
                  "Repo": {
                    "Ref": "GithubRepository"
                  },
                  "Branch": {
                    "Ref": "GithubBranch"
                  },
                  "OAuthToken": {
                    "Fn::Join": [
                      "",
                      [
                        "{{resolve:secretsmanager:",
                        {
                          "Ref": "GithubSecretId"
                        },
                        ":SecretString:::}}"
                      ]
                    ]
                  },
                  "PollForSourceChanges": false
                },
                "Name": "GithubSource",
                "OutputArtifacts": [
                  {
                    "Name": "Artifact_Source_GithubSource"
                  }
                ],
                "RunOrder": 1
              }
            ],
            "Name": "Source"
          },
          {
            "Actions": [
              {
                "ActionTypeId": {
                  "Category": "Approval",
                  "Owner": "AWS",
                  "Provider": "Manual",
                  "Version": "1"
                },
                "Configuration": {
                  "NotificationArn": {
                    "Ref": "PipelineManualApprovalTopicResourceFA4095EF"
                  }
                },
                "Name": "Approval",
                "RoleArn": {
                  "Fn::GetAtt": [
                    "PipelineManualApprovalCodePipelineActionRole08E828A0",
                    "Arn"
                  ]
                },
                "RunOrder": 1
              }
            ],
            "Name": "ManualApproval"
          },
          {
            "Actions": [
              {
                "ActionTypeId": {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1"
                },
                "Configuration": {
                  "ProjectName": {
                    "Ref": "InstallerProject879FF821"
                  }
                },
                "InputArtifacts": [
                  {
                    "Name": "Artifact_Source_GithubSource"
                  }
                ],
                "Name": "DeployAccelerator",
                "RoleArn": {
                  "Fn::GetAtt": [
                    "PipelineDeployDeployAcceleratorCodePipelineActionRole45FB0E12",
                    "Arn"
                  ]
                },
                "RunOrder": 1
              }
            ],
            "Name": "Deploy"
          },
          {
            "Actions": [
              {
                "ActionTypeId": {
                  "Category": "Invoke",
                  "Owner": "AWS",
                  "Provider": "Lambda",
                  "Version": "1"
                },
                "Configuration": {
                  "FunctionName": {
                    "Ref": "ExecutionLambda949691DD"
                  }
                },
                "Name": "ExecuteAcceleratorStateMachine",
                "RoleArn": {
                  "Fn::GetAtt": [
                    "PipelineExecuteExecuteAcceleratorStateMachineCodePipelineActionRole7336DC59",
                    "Arn"
                  ]
                },
                "RunOrder": 1
              }
            ],
            "Name": "Execute"
          }
        ],
        "ArtifactStore": {
          "Location": {
            "Ref": "ArtifactsBucket2AAC5544"
          },
          "Type": "S3"
        },
        "Name": "PBMMAccel-InstallerPipeline",
        "Tags": [
          {
            "Key": "Accelerator",
            "Value": "PBMM"
          }
        ]
      },
      "DependsOn": [
        "PipelineRoleDefaultPolicyC7A05455",
        "PipelineRoleD68726F7"
      ],
      "Metadata": {
        "aws:cdk:path": "InstallerStack/Pipeline/Resource"
      }
    },
    "PipelineSourceGithubSourceWebhookResource05FA5D46": {
      "Type": "AWS::CodePipeline::Webhook",
      "Properties": {
        "Authentication": "GITHUB_HMAC",
        "AuthenticationConfiguration": {
          "SecretToken": {
            "Fn::Join": [
              "",
              [
                "{{resolve:secretsmanager:",
                {
                  "Ref": "GithubSecretId"
                },
                ":SecretString:::}}"
              ]
            ]
          }
        },
        "Filters": [
          {
            "JsonPath": "$.ref",
            "MatchEquals": "refs/heads/{Branch}"
          }
        ],
        "TargetAction": "GithubSource",
        "TargetPipeline": {
          "Ref": "PipelineC660917D"
        },
        "TargetPipelineVersion": 1,
        "RegisterWithThirdParty": true
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/Pipeline/Source/GithubSource/WebhookResource"
      }
    },
    "PipelineManualApprovalCodePipelineActionRole08E828A0": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":root"
                    ]
                  ]
                }
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "Tags": [
          {
            "Key": "Accelerator",
            "Value": "PBMM"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/Pipeline/ManualApproval/Approval/CodePipelineActionRole/Resource"
      }
    },
    "PipelineManualApprovalCodePipelineActionRoleDefaultPolicyAE808A77": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "sns:Publish",
              "Effect": "Allow",
              "Resource": {
                "Ref": "PipelineManualApprovalTopicResourceFA4095EF"
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PipelineManualApprovalCodePipelineActionRoleDefaultPolicyAE808A77",
        "Roles": [
          {
            "Ref": "PipelineManualApprovalCodePipelineActionRole08E828A0"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/Pipeline/ManualApproval/Approval/CodePipelineActionRole/DefaultPolicy/Resource"
      }
    },
    "PipelineManualApprovalTopicResourceFA4095EF": {
      "Type": "AWS::SNS::Topic",
      "Properties": {
        "Tags": [
          {
            "Key": "Accelerator",
            "Value": "PBMM"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/Pipeline/ManualApproval/Approval/TopicResource/Resource"
      }
    },
    "PipelineManualApprovalTopicResourceTokenSubscription19896F67C": {
      "Type": "AWS::SNS::Subscription",
      "Properties": {
        "Protocol": "email",
        "TopicArn": {
          "Ref": "PipelineManualApprovalTopicResourceFA4095EF"
        },
        "Endpoint": {
          "Ref": "Email"
        }
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/Pipeline/ManualApproval/Approval/TopicResource/TokenSubscription:1/Resource"
      }
    },
    "PipelineDeployDeployAcceleratorCodePipelineActionRole45FB0E12": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":root"
                    ]
                  ]
                }
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "Tags": [
          {
            "Key": "Accelerator",
            "Value": "PBMM"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/Pipeline/Deploy/DeployAccelerator/CodePipelineActionRole/Resource"
      }
    },
    "PipelineDeployDeployAcceleratorCodePipelineActionRoleDefaultPolicyB426360F": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild"
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "InstallerProject879FF821",
                  "Arn"
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PipelineDeployDeployAcceleratorCodePipelineActionRoleDefaultPolicyB426360F",
        "Roles": [
          {
            "Ref": "PipelineDeployDeployAcceleratorCodePipelineActionRole45FB0E12"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/Pipeline/Deploy/DeployAccelerator/CodePipelineActionRole/DefaultPolicy/Resource"
      }
    },
    "PipelineExecuteExecuteAcceleratorStateMachineCodePipelineActionRole7336DC59": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":root"
                    ]
                  ]
                }
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "Tags": [
          {
            "Key": "Accelerator",
            "Value": "PBMM"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/Pipeline/Execute/ExecuteAcceleratorStateMachine/CodePipelineActionRole/Resource"
      }
    },
    "PipelineExecuteExecuteAcceleratorStateMachineCodePipelineActionRoleDefaultPolicy0C3AB5A7": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:ListFunctions",
              "Effect": "Allow",
              "Resource": "*"
            },
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "ExecutionLambda949691DD",
                  "Arn"
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PipelineExecuteExecuteAcceleratorStateMachineCodePipelineActionRoleDefaultPolicy0C3AB5A7",
        "Roles": [
          {
            "Ref": "PipelineExecuteExecuteAcceleratorStateMachineCodePipelineActionRole7336DC59"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "InstallerStack/Pipeline/Execute/ExecuteAcceleratorStateMachine/CodePipelineActionRole/DefaultPolicy/Resource"
      }
    }
  }
}